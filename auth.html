<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>HomeC</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyA9Wtvvo1idJB2lXCfwBckgk2hrDbSXOfI",
  authDomain: "homec-e6227.firebaseapp.com",
  databaseURL: "https://homec-e6227-default-rtdb.firebaseio.com",
  projectId: "homec-e6227",
  storageBucket: "homec-e6227.firebasestorage.app",
  messagingSenderId: "55229004317",
  appId: "1:55229004317:web:9495e508539d364f68e4f4"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:#f2f2f2;
}

.card{
background:white;
padding:30px;
width:90%;
max-width:350px;
border-radius:20px;
box-shadow:0 15px 30px rgba(0,0,0,0.1);
}

h2{text-align:center;margin-bottom:20px;}

input{
width:100%;
padding:12px;
margin:8px 0;
border-radius:12px;
border:1px solid #ccc;
}

button{
width:100%;
padding:12px;
margin-top:10px;
border:none;
border-radius:12px;
background:#007bff;
color:white;
font-weight:bold;
}
</style>
</head>

<body>

<div class="card">
<h2>HomeC</h2>

<input id="regUser" placeholder="New Username">
<input id="regPass" type="password" placeholder="New Password">
<button onclick="register()">Register</button>

<hr>

<input id="logUser" placeholder="Username">
<input id="logPass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<script>
let currentUser = localStorage.getItem("loggedInUser");
if(currentUser){
location.href="index.html";
}

function register(){
let u=regUser.value;
let p=regPass.value;
if(!u||!p){alert("Fill all fields");return;}

db.ref("users/"+u).get().then(s=>{
if(s.exists()){alert("Username exists");return;}
db.ref("users/"+u).set({
password:p,
online:false
});
alert("Account created!");
});
}

function login(){
let u=logUser.value;
let p=logPass.value;

db.ref("users/"+u).get().then(s=>{
if(!s.exists()||s.val().password!==p){
alert("Invalid login");return;
}

localStorage.setItem("loggedInUser",u);
db.ref("users/"+u+"/online").set(true);
location.href="index.html";
});
}
</script>

</body>
</html>